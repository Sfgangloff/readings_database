{"ast":null,"code":"import _regeneratorRuntime from\"/home/silvere/Desktop/Apps/readinglist/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/silvere/Desktop/Apps/readinglist/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/silvere/Desktop/Apps/readinglist/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import'./App.css';import moment from'moment';import firebase from'firebase/compat/app';import'firebase/compat/auth';import'firebase/compat/firestore';import Icon from'./pdficon.js';import Main from'./main.js';import{useAuthState}from'react-firebase-hooks/auth';import{useCollectionData}from'react-firebase-hooks/firestore';import\"./mystyles.css\";import{jsx as _jsx}from\"react/jsx-runtime\";if(!firebase.apps.length){firebase.initializeApp({apiKey:\"AIzaSyDQHIUAJZa_gXAVOFHWaCZAXs37WtknptM\",authDomain:\"database-f440f.firebaseapp.com\",projectId:\"database-f440f\",storageBucket:\"database-f440f.appspot.com\",messagingSenderId:\"281186121141\",appId:\"1:281186121141:web:a1b7d991000239eeb095fc\",measurementId:\"G-MR96H6LFZE\"});}else{firebase.app();}var auth=firebase.auth();var firestore=firebase.firestore();function App(){var _useAuthState=useAuthState(auth),_useAuthState2=_slicedToArray(_useAuthState,1),user=_useAuthState2[0];return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:user?/*#__PURE__*/_jsx(Main,{auth:auth,firestore:firestore}):/*#__PURE__*/_jsx(Signin,{})});}var Signin=function Signin(){var signInWithGoogle=function signInWithGoogle(){var provider=new firebase.auth.GoogleAuthProvider();auth.signInWithPopup(provider).then(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(result){var user,userRef,query,snapshot;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:user=result.user;if(!user){_context.next=8;break;}userRef=firestore.collection('users');query=userRef.where(\"id\",\"==\",user.uid).limit(1);_context.next=6;return query.get();case 6:snapshot=_context.sent;if(snapshot.empty){userRef.add({id:user.uid,uname:user.displayName,status:\"user\"});}case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}()).catch(function(e){});};var googleLogo=new URL(\"./btn_google_4.png\",import.meta.url);return/*#__PURE__*/_jsx(\"div\",{className:\"signin\",style:{display:'flex',alignItems:'center',justifyContent:'center',height:'100vh'},children:/*#__PURE__*/_jsx(\"button\",{onClick:signInWithGoogle,className:\"btn btn-primary btn-lg\",children:/*#__PURE__*/_jsx(\"img\",{src:googleLogo})})});};export default App;","map":{"version":3,"names":["React","useState","moment","firebase","Icon","Main","useAuthState","useCollectionData","apps","length","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","firestore","App","user","Signin","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","then","result","userRef","collection","query","where","uid","limit","get","snapshot","empty","add","id","uname","displayName","status","catch","e","googleLogo","URL","import","meta","url","display","alignItems","justifyContent","height"],"sources":["/home/silvere/Desktop/Apps/readinglist/src/App.js"],"sourcesContent":["import React, { useState } from 'react';\nimport './App.css';\nimport moment from 'moment';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport 'firebase/compat/firestore';\nimport Icon from './pdficon.js';\nimport Main from './main.js';\n\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore';\n\nimport \"./mystyles.css\"\n\nif (!firebase.apps.length) {\n\n  firebase.initializeApp({\n    apiKey: \"AIzaSyDQHIUAJZa_gXAVOFHWaCZAXs37WtknptM\",\n    authDomain: \"database-f440f.firebaseapp.com\",\n    projectId: \"database-f440f\",\n    storageBucket: \"database-f440f.appspot.com\",\n    messagingSenderId: \"281186121141\",\n    appId: \"1:281186121141:web:a1b7d991000239eeb095fc\",\n    measurementId: \"G-MR96H6LFZE\"\n  })\n\n} else {\n  firebase.app()\n}\n\nconst auth = firebase.auth();\nconst firestore = firebase.firestore();\n\nfunction App() {\n  const [user]  = useAuthState(auth);\n  \n  return (\n    <div className=\"container\">\n      {\n        user ? <Main auth={auth} firestore={firestore}/>: <Signin />\n      }\n    </div>\n  );\n}\n\nconst Signin = () => {\n  const signInWithGoogle = ()=> {\n    const provider = new firebase.auth.GoogleAuthProvider();\n  auth.signInWithPopup(provider).then(async result => {\n    var user = result.user;\n    if (user) {\n      const userRef = firestore.collection('users');\n      const query = userRef.where(\"id\", \"==\", user.uid).limit(1);\n      const snapshot = await query.get();\n      \n    if (snapshot.empty) {\n          userRef.add({\n            id:user.uid, \n            uname:user.displayName, \n            status:\"user\"\n          });\n        }\n\n\n      \n    }\n }).catch(e => {\n });\n\n  }\n\n  const googleLogo = new URL(\"./btn_google_4.png\",import.meta.url)\n\n  return (\n    <div className='signin' style={{\n      display: 'flex',\n      alignItems: 'center',\n      justifyContent: 'center',\n      height: '100vh',\n    }}>\n      <button\n      onClick ={signInWithGoogle}\n      className='btn btn-primary btn-lg'>\n        <img src={googleLogo}/>\n      </button>\n    </div>\n  )\n}\n\n\nexport default App;"],"mappings":"oYAAA,MAAOA,MAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,WAAW,CAClB,MAAOC,OAAM,KAAM,QAAQ,CAC3B,MAAOC,SAAQ,KAAM,qBAAqB,CAC1C,MAAO,sBAAsB,CAC7B,MAAO,2BAA2B,CAClC,MAAOC,KAAI,KAAM,cAAc,CAC/B,MAAOC,KAAI,KAAM,WAAW,CAE5B,OAASC,YAAY,KAAQ,2BAA2B,CACxD,OAASC,iBAAiB,KAAQ,gCAAgC,CAElE,MAAO,gBAAgB,4CAEvB,GAAI,CAACJ,QAAQ,CAACK,IAAI,CAACC,MAAM,CAAE,CAEzBN,QAAQ,CAACO,aAAa,CAAC,CACrBC,MAAM,CAAE,yCAAyC,CACjDC,UAAU,CAAE,gCAAgC,CAC5CC,SAAS,CAAE,gBAAgB,CAC3BC,aAAa,CAAE,4BAA4B,CAC3CC,iBAAiB,CAAE,cAAc,CACjCC,KAAK,CAAE,2CAA2C,CAClDC,aAAa,CAAE,cACjB,CAAC,CAAC,CAEJ,CAAC,IAAM,CACLd,QAAQ,CAACe,GAAG,EAAE,CAChB,CAEA,GAAMC,KAAI,CAAGhB,QAAQ,CAACgB,IAAI,EAAE,CAC5B,GAAMC,UAAS,CAAGjB,QAAQ,CAACiB,SAAS,EAAE,CAEtC,QAASC,IAAG,EAAG,CACb,kBAAgBf,YAAY,CAACa,IAAI,CAAC,gDAA3BG,IAAI,mBAEX,mBACE,YAAK,SAAS,CAAC,WAAW,UAEtBA,IAAI,cAAG,KAAC,IAAI,EAAC,IAAI,CAAEH,IAAK,CAAC,SAAS,CAAEC,SAAU,EAAE,cAAE,KAAC,MAAM,IAAG,EAE1D,CAEV,CAEA,GAAMG,OAAM,CAAG,QAATA,OAAM,EAAS,CACnB,GAAMC,iBAAgB,CAAG,QAAnBA,iBAAgB,EAAQ,CAC5B,GAAMC,SAAQ,CAAG,GAAItB,SAAQ,CAACgB,IAAI,CAACO,kBAAkB,EAAE,CACzDP,IAAI,CAACQ,eAAe,CAACF,QAAQ,CAAC,CAACG,IAAI,4FAAC,iBAAMC,MAAM,oJAC1CP,IAAI,CAAGO,MAAM,CAACP,IAAI,KAClBA,IAAI,yBACAQ,OAAO,CAAGV,SAAS,CAACW,UAAU,CAAC,OAAO,CAAC,CACvCC,KAAK,CAAGF,OAAO,CAACG,KAAK,CAAC,IAAI,CAAE,IAAI,CAAEX,IAAI,CAACY,GAAG,CAAC,CAACC,KAAK,CAAC,CAAC,CAAC,uBACnCH,MAAK,CAACI,GAAG,EAAE,QAA5BC,QAAQ,eAEhB,GAAIA,QAAQ,CAACC,KAAK,CAAE,CACdR,OAAO,CAACS,GAAG,CAAC,CACVC,EAAE,CAAClB,IAAI,CAACY,GAAG,CACXO,KAAK,CAACnB,IAAI,CAACoB,WAAW,CACtBC,MAAM,CAAC,MACT,CAAC,CAAC,CACJ,CAAC,sDAKP,+DAAC,CAACC,KAAK,CAAC,SAAAC,CAAC,CAAI,CACd,CAAC,CAAC,CAED,CAAC,CAED,GAAMC,WAAU,CAAG,GAAIC,IAAG,CAAC,oBAAoB,CAACC,MAAM,CAACC,IAAI,CAACC,GAAG,CAAC,CAEhE,mBACE,YAAK,SAAS,CAAC,QAAQ,CAAC,KAAK,CAAE,CAC7BC,OAAO,CAAE,MAAM,CACfC,UAAU,CAAE,QAAQ,CACpBC,cAAc,CAAE,QAAQ,CACxBC,MAAM,CAAE,OACV,CAAE,uBACA,eACA,OAAO,CAAG9B,gBAAiB,CAC3B,SAAS,CAAC,wBAAwB,uBAChC,YAAK,GAAG,CAAEsB,UAAW,EAAE,EAChB,EACL,CAEV,CAAC,CAGD,cAAezB,IAAG"},"metadata":{},"sourceType":"module","externalDependencies":[]}